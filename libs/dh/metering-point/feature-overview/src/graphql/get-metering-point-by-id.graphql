fragment RelatedMeteringPoint on RelatedMeteringPointDto {
  id
  identification
  type
  connectionState
  connectionDate
  closedDownDate
}

fragment CustomerContact on CustomerContactDto {
  id
  phone
  email
  streetName
  buildingNumber
  postCode
  streetCode
  cityName
  municipalityCode
  postBox
  countryCode
  darReference
  isProtectedAddress
  citySubDivisionName
  attention
  name
  mobile
}

query GetMeteringPointById($meteringPointId: String!, $actorGln: String!) {
  meteringPoint(meteringPointId: $meteringPointId) {
    id
    isChild
    meteringPointId
    isEnergySupplier(energySupplierActorGln: $actorGln)
    isGridAccessProvider(gridAccessProviderActorGln: $actorGln)
    relatedMeteringPoints {
      parent {
        id
        ...RelatedMeteringPoint
      }
      current {
        id
        ...RelatedMeteringPoint
      }
      relatedMeteringPoints {
        id
        ...RelatedMeteringPoint
      }
      relatedByGsrn {
        id
        ...RelatedMeteringPoint
      }
      historicalMeteringPoints {
        id
        ...RelatedMeteringPoint
      }
      historicalMeteringPointsByGsrn {
        id
        ...RelatedMeteringPoint
      }
    }
    commercialRelation {
      id
      energySupplier
      energySupplierName {
        value
      }
      haveElectricalHeating
      hadElectricalHeating
      activeElectricalHeatingPeriods {
        id
        validFrom
      }
      electricalHeatingPeriods {
        id
        validTo
      }
      activeEnergySupplyPeriod {
        id
        validFrom
        customers {
          id
          isProtectedName
          cvr
          name
          technicalContact {
            ...CustomerContact
          }
          legalContact {
            ...CustomerContact
          }
        }
      }
    }
    metadata {
      id
      measureUnit
      type
      subType
      gridArea {
        id
        displayName
      }
      ownedBy
      connectionState
      netSettlementGroup
      resolution
      product
      scheduledMeterReadingMonth
      assetType
      connectionType
      disconnectionType
      environmentalFriendly
      fromGridArea {
        id
        displayName
      }
      toGridArea {
        id
        displayName
      }
      capacity
      powerLimitKw
      powerPlantGsrn
      meterNumber
      settlementMethod
      installationAddress {
        id
        streetName
        streetCode
        cityName
        floor
        postCode
        room
        municipalityCode
        citySubDivisionName
        locationDescription
        buildingNumber
        darReference
        washInstructions
        countryCode
      }
    }
  }
}
